# Prompts Adaptados para VibeCoding - RooCode

140 prompts otimizados para o **RooCode**, usando os modos **Architect**, **Code**, **Ask**, e **QA**. Focam em desenvolvimento local de uma API para coleta de métricas de redes sociais, com PostgreSQL instalado, comandos Git simplificados via MCP Server, e autenticação de usuários via tokens (sem senhas). As tarefas são numeradas conforme o plano original, com 5 novas tarefas (151-155) para autenticação.

## 1. Configuração Inicial do Projeto (15 Tarefas)
1. "No modo Architect, planeje a criação de um repositório Git no GitHub chamado 'social-media-metrics-api' usando MCP Server (`gh repo create`). Gere um README.md com uma descrição do projeto (API para coleta de métricas de redes sociais)."
2. "No modo Code, crie um arquivo `requirements.txt` com as dependências `fastapi`, `uvicorn`, `pydantic`, `requests`, `psycopg2`, `sqlalchemy`, `cryptography`, `python-dotenv`, `celery`, `redis`."
3. "No modo Code, gere um arquivo `.gitignore` com entradas para `venv/`, `__pycache__/`, `.env`, e arquivos sensíveis como `*.log`."
4. "No modo Architect, planeje a criação de um ambiente virtual Python com `venv`. Gere o comando para criar o ambiente (`python -m venv venv`)."
5. "No modo Code, crie um arquivo `.env` com variáveis `DATABASE_URL`, `API_KEYS`, `CELERY_BROKER_URL`, e configure o carregamento com `python-dotenv`."
6. "No modo Code, gere um comando para instalar as dependências do `requirements.txt` (`pip install -r requirements.txt`)."
7. "No modo Code, crie a estrutura de pastas: `app/`, `app/api/`, `app/core/`, `app/db/`, `app/models/`, `app/services/`, `tests/`."
8. "No modo Ask, atualize o README.md com instruções detalhadas de instalação (clonar repositório, criar venv, instalar dependências) e execução (`./run.sh`)."
9. "No modo Code, configure o linter `flake8` com um arquivo `.flake8` definindo padrões de código (ex.: max-line-length=88)."
10. "No modo Code, configure o formatador `black` com um arquivo `pyproject.toml` para padronizar o estilo do código."
11. "No modo Code, gere um script `setup.sh` para automatizar a criação do venv e instalação de dependências."
12. "No modo Code, gere um script `run.sh` para iniciar o servidor FastAPI com `uvicorn app.main:app --reload`."
13. "No modo QA, teste a execução do script `run.sh` e verifique se o servidor FastAPI inicia sem erros em `http://localhost:8000`."
14. "No modo Code, crie um arquivo `app/__init__.py` para inicializar o módulo `app`."
15. "No modo Code, gere um comando para fazer o commit inicial do projeto via MCP Server (`git commit -m 'Initial setup'`) e push para o repositório (`git push origin main`)."

## 2. Configuração do Banco de Dados (15 Tarefas)
16. "No modo Code, gere um script SQL para criar um banco de dados PostgreSQL chamado `social_metrics_db`. Inclua instruções para executá-lo com `psql`."
17. "No modo Code, crie um arquivo `app/db/database.py` para configurar a conexão com o PostgreSQL usando `SQLAlchemy`, carregando o `DATABASE_URL` do `.env`."
18. "No modo Code, gere um script SQL para criar a tabela `platforms` com colunas `platform_id` (SERIAL PRIMARY KEY), `name` (VARCHAR(50) UNIQUE), `api_key` (VARCHAR(255))."
19. "No modo Code, gere um script SQL para criar a tabela `metrics` com colunas `metric_id` (SERIAL PRIMARY KEY), `user_id` (INT), `platform_id` (INT), `metric_type` (VARCHAR(50)), `value` (NUMERIC), `collected_at` (TIMESTAMP)."
20. "No modo Code, gere um script SQL para criar a tabela `users` com colunas `user_id` (SERIAL PRIMARY KEY), `name` (VARCHAR(255)), `email` (VARCHAR(255) UNIQUE), `platform_user_id` (VARCHAR(255)), `access_token` (TEXT)."
21. "No modo Code, gere um script de migração inicial com `Alembic` em `alembic/versions/` para criar as tabelas `users`, `platforms`, e `metrics`."
22. "No modo QA, teste a conexão com o banco de dados executando uma query simples (`SELECT 1`) via `SQLAlchemy`."
23. "No modo Code, gere um script SQL para criar índices na tabela `metrics` para as colunas `user_id`, `platform_id`, e `collected_at`."
24. "No modo Code, crie um script Python em `scripts/populate_db.py` para popular o banco com dados de teste (2 usuários, 5 plataformas: X, Facebook, Instagram, WhatsApp, TikTok)."
25. "No modo QA, teste a inserção de uma métrica de teste na tabela `metrics` usando `SQLAlchemy` e verifique os dados com uma query `SELECT`."
26. "No modo Code, crie um arquivo `app/db/models.py` com modelos `SQLAlchemy` para `User`, `Platform`, e `Metric`, incluindo `platform_user_id` e `access_token` na tabela `users`."
27. "No modo Code, gere um arquivo `app/db/crud.py` com funções CRUD (create, read, update, delete) para o modelo `User`."
28. "No modo Code, adicione ao `app/db/crud.py` funções CRUD (create, read) para o modelo `Metric`."
29. "No modo Code, gere um script SQL para adicionar uma constraint de unicidade em `platform_user_id` por `platform_id` na tabela `users` (ex.: UNIQUE(platform_id, platform_user_id))."
30. "No modo Ask, crie um arquivo `docs/database_schema.md` documentando o esquema do banco de dados com descrições das tabelas e colunas."

## 3. Desenvolvimento do Backend com FastAPI (20 Tarefas)
31. "No modo Code, gere um arquivo `app/main.py` com um aplicativo FastAPI básico, configurando CORS para permitir requisições de `http://localhost` e um endpoint GET /health retornando { 'status': 'ok' }."
32. "No modo Code, crie um arquivo `app/api/endpoints/users.py` para endpoints relacionados a usuários."
33. "No modo Code, gere um endpoint POST /users/ em `app/api/endpoints/users.py` para criar um usuário no banco PostgreSQL com campos `name`, `email`, `platform_user_id`, `access_token`, usando `Pydantic` para validação."
34. "No modo Code, gere um endpoint GET /users/{user_id} em `app/api/endpoints/users.py` para recuperar as informações de um usuário pelo `user_id`."
35. "No modo Code, gere um endpoint PUT /users/{user_id} em `app/api/endpoints/users.py` para atualizar as informações de um usuário (ex.: `name`, `email`)."
36. "No modo Code, gere um endpoint DELETE /users/{user_id} em `app/api/endpoints/users.py` para excluir um usuário do banco."
37. "No modo Code, crie um arquivo `app/api/endpoints/platforms.py` para endpoints relacionados a plataformas."
38. "No modo Code, gere um endpoint POST /platforms/ em `app/api/endpoints/platforms.py` para adicionar uma nova plataforma com `name` e `api_key`."
39. "No modo Code, gere um endpoint GET /platforms/ em `app/api/endpoints/platforms.py` para listar todas as plataformas cadastradas."
40. "No modo Code, crie um arquivo `app/api/endpoints/metrics.py` para endpoints relacionados a métricas."
41. "No modo Code, gere um endpoint POST /metrics/ em `app/api/endpoints/metrics.py` para registrar uma nova métrica com `user_id`, `platform_id`, `metric_type`, `value`, `collected_at`."
42. "No modo Code, gere um endpoint GET /metrics/ em `app/api/endpoints/metrics.py` para consultar métricas com filtros opcionais `user_id`, `platform`, `start_date`, `end_date`."
43. "No modo Code, configure validação de entrada nos endpoints de `users`, `platforms`, e `metrics` usando modelos `Pydantic` para garantir dados corretos."
44. "No modo Code, implemente tratamento de erros HTTP (ex.: 404 para usuário não encontrado, 400 para dados inválidos) em todos os endpoints."
45. "No modo Code, crie um arquivo `app/core/logging.py` para configurar logging em formato JSON, registrando requisições e erros."
46. "No modo Code, crie um arquivo `app/core/config.py` para centralizar configurações como `DATABASE_URL`, `LOG_LEVEL`, e `API_KEYS`."
47. "No modo QA, teste todos os endpoints criados usando `curl` ou Postman com dados de teste e verifique as respostas."
48. "No modo Ask, gere documentação automática da API no README.md, explicando como acessar o Swagger UI em `/docs`."
49. "No modo Code, adicione um middleware em `app/main.py` para logar o tempo de processamento de cada requisição."
50. "No modo Code, gere um arquivo `app/api/dependencies.py` com funções de dependência para validação de autenticação em endpoints protegidos."

## 4. Integração com APIs de Redes Sociais (30 Tarefas)
51. "No modo Code, crie um arquivo `app/services/api_clients.py` para centralizar a inicialização de clientes HTTP para APIs de redes sociais (X, Meta, WhatsApp, TikTok)."
52. "No modo Code, gere um cliente HTTP em `app/services/x_client.py` para a X API v2 com autenticação OAuth 2.0, usando `platform_user_id` e `access_token`."
53. "No modo Code, adicione ao `app/services/x_client.py` um método para coletar impressões de tweets de um usuário, salvando os dados na tabela `metrics`."
54. "No modo Code, adicione ao `app/services/x_client.py` um método para coletar retweets e menções de um usuário na X API v2."
55. "No modo Code, gere um cliente HTTP em `app/services/meta_client.py` para a Meta Graph API com autenticação OAuth 2.0."
56. "No modo Code, adicione ao `app/services/meta_client.py` um método para coletar alcance de postagens de uma página no Facebook usando `access_token`."
57. "No modo Code, adicione ao `app/services/meta_client.py` um método para coletar engajamento (curtidas, comentários) de postagens no Instagram."
58. "No modo Code, gere um cliente HTTP em `app/services/whatsapp_client.py` para a WhatsApp Business API com autenticação via token."
59. "No modo Code, adicione ao `app/services/whatsapp_client.py` um método para coletar volume de mensagens enviadas/recebidas."
60. "No modo Code, gere um cliente HTTP em `app/services/tiktok_client.py` para a TikTok API com autenticação OAuth 2.0."
61. "No modo Code, adicione ao `app/services/tiktok_client.py` um método para coletar visualizações de vídeos de um usuário."
62. "No modo Code, implemente um mecanismo de retry em `app/services/api_clients.py` usando `tenacity` para lidar com falhas temporárias nas APIs."
63. "No modo Code, crie um arquivo `app/core/rate_limiter.py` para gerenciar limites de requisições por plataforma (ex.: 10.000/mês para X API Basic)."
64. "No modo QA, teste a coleta de métricas da X API para um usuário de teste, verificando a inserção na tabela `metrics`."
65. "No modo QA, teste a coleta de métricas da Meta Graph API para uma página de teste no Facebook."
66. "No modo QA, teste a coleta de métricas da Meta Graph API para uma conta de teste no Instagram."
67. "No modo QA, teste a coleta de métricas da WhatsApp Business API para uma conta comercial de teste."
68. "No modo QA, teste a coleta de métricas da TikTok API para uma conta de teste."
69. "No modo Code, gere um script em `tests/test_api_clients.py` para simular falhas de API e testar o mecanismo de retry."
70. "No modo Code, configure armazenamento seguro de tokens de acesso em `app/core/security.py` usando `python-decouple` e `.env`."
71. "No modo Code, implemente renovação automática de tokens de acesso em `app/services/api_clients.py` para APIs que exigem refresh tokens."
72. "No modo Ask, crie um arquivo `docs/api_integration.md` documentando as APIs usadas (X, Meta, WhatsApp, TikTok) e suas limitações."
73. "No modo Code, implemente validação de respostas das APIs em `app/services/api_clients.py` para garantir dados consistentes antes de salvar."
74. "No modo Code, configure webhooks em `app/api/endpoints/webhooks.py` para atualizações em tempo real da WhatsApp Business API."
75. "No modo Code, configure webhooks em `app/api/endpoints/webhooks.py` para atualizações em tempo real da Meta Graph API (Instagram)."
76. "No modo QA, teste o recebimento de atualizações via webhooks para a WhatsApp Business API."
77. "No modo QA, teste o recebimento de atualizações via webhooks para a Meta Graph API (Instagram)."
78. "No modo Code, implemente um mecanismo de cache em `app/core/cache.py` usando `redis` para respostas frequentes das APIs."
79. "No modo QA, teste o desempenho da coleta de métricas para 10 usuários simultâneos, verificando o tempo de resposta."
80. "No modo Code, adicione logging detalhado em `app/services/api_clients.py` para rastrear chamadas de API e erros."

## 5. Agendamento e Escalabilidade (15 Tarefas)
81. "No modo Architect, planeje a configuração de `Celery` e `Redis` localmente para tarefas assíncronas. Gere um exemplo de tarefa em `app/tasks.py`."
82. "No modo Code, crie um arquivo `app/tasks.py` para definir tarefas de coleta periódica de métricas."
83. "No modo Code, gere uma tarefa Celery em `app/tasks.py` para coletar métricas de todos os usuários a cada 24 horas, usando os clientes de API."
84. "No modo Code, configure um agendador com `Celery Beat` em `celeryconfig.py` para executar a tarefa de coleta diária."
85. "No modo QA, teste a execução da tarefa de coleta periódica para 5 usuários, verificando os dados na tabela `metrics`."
86. "No modo Code, gere um arquivo `docker-compose.yml` para rodar `Redis` e `Celery` localmente em contêineres."
87. "No modo Code, configure o `Celery` para usar o `Redis` como broker, atualizando o `CELERY_BROKER_URL` no `.env`."
88. "No modo Code, adicione logging em `app/tasks.py` para rastrear a execução de tarefas Celery."
89. "No modo QA, teste a escalabilidade da tarefa Celery com 100 usuários simulados."
90. "No modo Code, crie índices otimizados no PostgreSQL para consultas frequentes do endpoint GET /metrics/ (ex.: por `user_id`, `collected_at`)."
91. "No modo Architect, planeje a configuração de sharding no PostgreSQL para suportar crescimento de dados. Gere um script SQL de exemplo."
92. "No modo Code, gere um script em `scripts/optimize_db.py` para analisar e otimizar o desempenho do banco de dados."
93. "No modo QA, teste o tempo de coleta de métricas por plataforma, visando menos de 5 segundos por usuário."
94. "No modo Ask, crie um arquivo `docs/scheduling.md` documentando a configuração de `Celery` e `Redis` para tarefas periódicas."
95. "No modo Code, adicione uma tarefa Celery em `app/tasks.py` para limpar métricas antigas (ex.: com mais de 1 ano)."

## 6. Segurança e Conformidade (15 Tarefas)
96. "No modo Code, crie um arquivo `app/core/config.py` para configurar HTTPS no FastAPI usando certificados SSL autoassinados para desenvolvimento local."
97. "No modo Code, implemente criptografia AES-256 para `access_token` em `app/core/security.py` usando a biblioteca `cryptography`."
98. "No modo Code, crie um módulo `app/core/auth.py` com autenticação JWT para proteger endpoints FastAPI, incluindo um endpoint POST /auth/login."
99. "No modo QA, teste a autenticação JWT no endpoint POST /metrics/, verificando respostas 401 para tokens inválidos."
100. "No modo Code, implemente conformidade com LGPD em `app/core/compliance.py`, incluindo um endpoint POST /consent/ para registrar consentimento do usuário."
101. "No modo Ask, crie um arquivo `docs/compliance.md` detalhando medidas de conformidade com LGPD e GDPR."
102. "No modo Code, implemente um mecanismo em `app/core/compliance.py` para registrar consentimento do usuário antes de coletar dados sensíveis."
103. "No modo Code, configure auditoria de acesso a dados sensíveis no banco, logando consultas em `app/core/logging.py`."
104. "No modo QA, teste a criptografia de dados em trânsito usando `curl` com HTTPS no endpoint /health."
105. "No modo Code, implemente rotação de tokens de API internos a cada 30 dias em `app/core/security.py`."
106. "No modo Code, configure backup seguro do arquivo `.env` em `scripts/backup_env.py`, criptografando com `cryptography`."
107. "No modo Code, implemente alertas para tentativas de acesso não autorizado em `app/core/auth.py`, logando em `app/core/logging.py`."
108. "No modo QA, teste a recuperação de backups do banco de dados usando um script `scripts/restore_db.py`."
109. "No modo QA, realize uma revisão de segurança no código usando `bandit` e gere um relatório em `docs/security_report.md`."
110. "No modo Code, adicione validação de entrada adicional em `app/api/dependencies.py` para prevenir injeção de SQL."

## 7. Testes e Qualidade (15 Tarefas)
111. "No modo QA, configure o `pytest` para testes unitários e de integração, gerando um arquivo `pytest.ini`."
112. "No modo QA, crie um arquivo `tests/test_users.py` com testes `pytest` para os endpoints POST /users/ e GET /users/{user_id}, validando `platform_user_id`."
113. "No modo QA, crie um arquivo `tests/test_platforms.py` com testes `pytest` para os endpoints POST /platforms/ e GET /platforms/."
114. "No modo QA, crie um arquivo `tests/test_metrics.py` com testes `pytest` para os endpoints POST /metrics/ e GET /metrics/."
115. "No modo QA, gere testes unitários em `tests/test_api_clients.py` para funções em `app/services/api_clients.py`."
116. "No modo QA, configure cobertura de testes com `pytest-cov`, visando cobertura acima de 80%."
117. "No modo QA, teste o tratamento de erros nos endpoints com entradas inválidas, verificando respostas 400 e 404."
118. "No modo Architect, planeje a integração contínua com GitHub Actions. Gere um arquivo `.github/workflows/ci.yml` para rodar testes automaticamente."
119. "No modo QA, crie um script em `tests/test_db_failure.py` para simular falhas de banco de dados e testar resiliência."
120. "No modo QA, teste a precisão das métricas coletadas comparando com dashboards nativos das plataformas (ex.: Instagram Insights)."
121. "No modo QA, configure testes de carga com `locust` em `tests/load_test.py` para 100 usuários simultâneos."
122. "No modo Ask, crie um arquivo `docs/tests.md` documentando os casos de teste e instruções para executar `pytest`."
123. "No modo QA, corrija problemas identificados pelo linter `flake8` em todo o código."
124. "No modo Code, aplique formatação com `black` em todos os arquivos Python antes do commit."
125. "No modo QA, revise a cobertura de testes e adicione casos faltantes em `tests/` para atingir 85% de cobertura."

## 8. Documentação e Manutenção (10 Tarefas)
141. "No modo Ask, crie um arquivo `docs/architecture.md` descrevendo a arquitetura da aplicação (FastAPI, PostgreSQL, Celery, autenticação de usuários)."
142. "No modo Ask, crie um arquivo `docs/api_endpoints.md` documentando todos os endpoints FastAPI (/users/, /metrics/, /platforms/, /health, /consent/) com exemplos de requisições e respostas."
143. "No modo Ask, crie um arquivo `docs/maintenance.md` com um guia de manutenção, incluindo atualização de dependências e revisão de logs."
144. "No modo Ask, crie um arquivo `docs/adding_platforms.md` documentando o processo para integrar novas plataformas (ex.: passos para adicionar YouTube)."
145. "No modo Code, crie um arquivo `CHANGELOG.md` para rastrear alterações no projeto, iniciando com a versão 0.1.0."
146. "No modo Architect, planeje um sistema de tickets para bugs e melhorias. Gere um modelo de issue no GitHub em `docs/issue_template.md`."
147. "No modo Ask, revise a documentação em `docs/` para garantir clareza e completude, gerando um relatório em `docs/doc_review.md`."
148. "No modo Ask, crie um tutorial para novos desenvolvedores em `docs/onboarding.md`, explicando o projeto e como começar."
149. "No modo Architect, planeje um plano de manutenção mensal (ex.: atualizar dependências, revisar logs). Gere um checklist em `docs/maintenance_checklist.md`."
150. "No modo Ask, crie um arquivo `docs/retrospective.md` com um modelo para reuniões de retrospectiva após o primeiro mês de desenvolvimento."

## 9. Autenticação de Usuários (5 Tarefas)
151. "No modo Code, gere um endpoint FastAPI POST /users/register-token/ em `app/api/endpoints/users.py` para associar um `platform_user_id` e `access_token` a um usuário existente para uma plataforma específica (ex.: X, Instagram)."
152. "No modo Code, crie um script em `app/services/token_manager.py` para criptografar e armazenar `access_token` no banco de dados usando `cryptography.fernet`."
153. "No modo Code, gere um endpoint FastAPI GET /users/{user_id}/tokens/ em `app/api/endpoints/users.py` para listar as plataformas e IDs de autenticação associados a um usuário, sem exibir os tokens."
154. "No modo Code, adicione validação no endpoint POST /users/ em `app/api/endpoints/users.py` para garantir que `platform_user_id` seja único por plataforma."
155. "No modo Ask, crie um arquivo `docs/token_management.md` explicando como configurar e gerenciar tokens de autenticação para APIs de redes sociais."